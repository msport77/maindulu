(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["307b815c"],{6987:function(e,t,o){},"6b27":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"products-list"},[o("q-table",{ref:"table",attrs:{color:"primary",title:"Product List",data:e.data,columns:e.columns,filter:e.filter,selection:"single",selected:e.selected,"row-key":"_id",row:"80px",pagination:e.pagination,loading:e.loading,"visible-columns":e.visibleColumns},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t},request:e.doFind},scopedSlots:e._u([{key:"top-selection",fn:function(t){return[o("q-btn",{attrs:{color:"positive",flat:"",round:"",icon:"mode edit"},on:{click:e.doEdit}}),o("q-btn",{attrs:{color:"negative",flat:"",round:"",icon:"delete"},on:{click:e.doDelete}})]}},{key:"top-left",fn:function(t){return[o("div",{staticClass:"row items-center"},[o("div",{staticClass:"col-auto q-px-xs"},[o("q-btn",{on:{click:e.doEdit}},[e._v("New")]),o("q-btn",{on:{click:e.savePdf}},[e._v("PDF")]),o("download-excel",{attrs:{data:e.data,fields:e.excelFields,name:"products.xls"}},[e._v("\n            Excel\n          ")])],1),o("div",{staticClass:"col q-px-xs"},[o("q-search",{attrs:{"hide-underline":""},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)])]}},{key:"top-right",fn:function(t){return[o("q-table-columns",{staticClass:"q-mr-sm",attrs:{color:"secondary","visible-columns":e.visibleColumns,columns:e.columns},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})]}},{key:"body-cell-imgURL",fn:function(e){return[o("td",[o("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.value}})])]}}])})],1)},i=[];n._withStripped=!0;var l=o("b93b"),r=o("e511"),a=o.n(r),c=o("6122");o("0da4");var d="admin",s="products",u="/".concat(d,"/").concat(s),p={components:{DownloadExcel:c["a"]},mixins:[Object(l["b"])(s,{},!0),Object(l["c"])(s)],created:function(){this.doFind().then(function(e){return console.log("responses",e)})},data:function(){return{baseRoute:u,aggregate:[{$lookup:{from:"vendors",localField:"productVendor",foreignField:"_id",as:"productVendor"}},{$lookup:{from:"categories",localField:"productCategories",foreignField:"_id",as:"productCategories"}},{$unwind:"$productVendor"},{$unwind:"$productCategories"}],excelFields:{"Product SKD":"productSKD","Product Name":"productName"},pdfFields:["Product SKD","Product Name"],visibleColumns:["_id","productSKD","imgURL","productName","productPrice","productAvailUnits","productCategories.categoryName","productVendor.vendorName"],columns:[{name:"productSKD",label:"SKD",align:"left",field:"productSKD",sortable:!0},{name:"imgURL",label:"Image",align:"center",field:"imgURL"},{name:"productName",label:"Name",align:"left",field:"productName",sortable:!0},{name:"productPrice",label:"Price",align:"left",field:"productPrice",sortable:!0,format:function(e){return"$ ".concat(e)}},{name:"productAvailUnits",label:"Available",align:"left",field:"productAvailUnits",sortable:!0},{name:"productCategories.categoryName",label:"Category",align:"left",sortable:!0,field:function(e){return e.productCategories.categoryName}},{name:"productVendor.vendorName",label:"Vendor",align:"left",sortable:!0,field:function(e){return e.productVendor.vendorName}}]}},methods:{doEdit:function(){var e=this.selected.length?this.selected[0]._id:"";this.$router.push("".concat(this.baseRoute,"/edit/").concat(e))},doDelete:function(){var e=this,t=this.selected.length?this.selected[0]._id:"";this.doRemove(t).then(function(){e.selected=[],e.$router.push("")})},filterHandler:function(e){return{$match:{$or:[{productName:{$regex:e,$options:"i"}},{"productVendor.vendorName":{$regex:e,$options:"i"}},{"productCategories.categoryName":{$regex:e,$options:"i"}}]}}},savePdf:function(){var e=new a.a("l","pt"),t=this.data.map(function(e){return[e.productSKD,e.productName]});e.autoTable(this.pdfFields,t),e.save("products.pdf")}}},f=p,m=(o("f74e"),o("2877")),g=Object(m["a"])(f,n,i,!1,null,null,null);g.options.__file="Products.list.vue";t["default"]=g.exports},f74e:function(e,t,o){"use strict";var n=o("6987"),i=o.n(n);i.a}}]);