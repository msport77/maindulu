(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["30c23be6"],{"0c3a":function(t,a,e){"use strict";e.d(a,"a",function(){return s});e("6b54"),e("28a5"),e("a481");var s=function(){return{methods:{ucWords:function(t){return t?t.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()}):""},convertToRupiah:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e="",s="",i=a?"Rp. ":"";if(t>0){s=t.toString().split("").reverse().join("");for(var r=0;r<s.length;r++)r%3===0&&(e+=s.substr(r,3)+".");return s=e.split("",e.length-1).reverse().join(""),"".concat(i).concat(s)}return"".concat(i,"0")}}}}},"151c":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"dashboard-img"},[e("div",{staticClass:"dashboard-title text-white"},[e("p",{staticClass:"txt-title"},[t._v(t._s(t.$t("facilityLimit")))]),e("h4",{staticClass:"aero q-my-sm"},[t._v(t._s(t.convertToRupiah(this.facilityLimit)))])])]),e("div",{staticClass:"facility-used bg-white"},[e("p",{staticClass:"txt-title"},[t._v(t._s(t.$t("totalUsage")))]),e("div",{staticClass:"facility-used-center bg-primary text-white"},[e("h4",{staticClass:"aero q-my-sm"},[t._v(t._s(t.convertToRupiah(this.totalAmountUsed)))])])]),e("div",{staticClass:"row justify-center bg-white q-py-md"},[e("div",{staticClass:"col-12 col-md-10 q-px-md"},[e("div",{staticClass:"row justify-center gutter-sm"},[e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[e("div",{staticClass:"rounded-card bg-primary text-white text-center"},[e("p",{staticClass:"txt-title"},[t._v(t._s(t.$t("remainingFacilities")))]),e("h4",{staticClass:"aero q-my-sm"},[t._v(t._s(t.convertToRupiah(this.facilityLimit-this.totalAmountUsed)))])])]),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[e("div",{staticClass:"rounded-card bg-primary text-white text-center"},[e("p",{staticClass:"txt-title"},[t._v(t._s(t.$t("totalHandlingFees")))]),e("h4",{staticClass:"aero q-my-sm"},[t._v(t._s(t.convertToRupiah(this.totalFee)))])])]),e("div",{staticClass:"col-xs-12 col-sm-6 col-md-4"},[e("div",{staticClass:"rounded-card bg-primary text-white text-center"},[e("p",{staticClass:"txt-title"},[t._v(t._s(t.$t("totalBill")))]),e("h4",{staticClass:"aero q-my-sm"},[t._v(t._s(t.convertToRupiah(this.totalAmount)))])])])])])]),e("div",{staticClass:"row justify-center bg-white"},[e("div",{staticClass:"col-12 col-md-10 q-px-md"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"loading-posisi"},[t.isSpinner?e("q-spinner",{staticClass:"loading",attrs:{color:"primary",size:60}}):t._e()],1)]),e("div",{staticClass:"col-12"},[e("div",{},[e("q-table",{staticClass:"full-width",attrs:{pagination:t.pagination,data:t.dttransaction,columns:t.columns,"visible-columns":t.visibleColumns,separator:t.separator,"row-key":"name",title:t.$t("myTrans")},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return e("q-tr",{class:a.row.borderColor,attrs:{props:a}},[e("q-td",{key:"itemName",attrs:{props:a}},[e("div",{staticClass:"text-weight-bold"},[t._v("\n                    "+t._s(a.row.cart.itemName)+"\n                  ")])]),e("q-td",{key:"createdAt",attrs:{props:a}},[t._v("\n                  "+t._s(t.dateFormat(a.row.createdAt))+"\n                ")]),e("q-td",{key:"duedate",attrs:{props:a}},[t._v("\n                  "+t._s(a.row.duedate)+"\n                ")]),e("q-td",{key:"amountWithFee",attrs:{props:a}},[t._v("\n                  "+t._s(t.convertToRupiah(a.row.totalAmount))+"\n                ")]),e("q-td",{key:"discount",attrs:{props:a}},[t._v("\n                  "+t._s(t.convertToRupiah(a.row.voucherLogsId&&a.row.voucherLogsId.voucherId&&a.row.voucherLogsId.voucherId.discount?a.row.voucherLogsId.voucherId.discount:0))+"\n                ")]),e("q-td",{key:"total",attrs:{props:a}},[t._v("\n                  "+t._s(t.convertToRupiah(a.row.voucherLogsId&&a.row.voucherLogsId.voucherId&&a.row.voucherLogsId.voucherId.discount?a.row.totalAmount-a.row.voucherLogsId.voucherId.discount:a.row.totalAmount))+"\n                ")]),e("q-td",{key:"paymentStatus",attrs:{props:a}},[e("div",{class:a.row.paymentStatusColor},[t._v("\n                    "+t._s(a.row.paymentStatus)+"\n                  ")])]),e("q-td",{key:"paidStatusText",attrs:{props:a}},[e("div",{class:a.row.paidStatusTextColor},[t._v("\n                    "+t._s(a.row.paidStatusText)+"\n                  ")])]),e("q-td",{key:"detail",attrs:{props:a}},[e("q-btn",{staticClass:"glow primary",attrs:{rounded:"",size:"sm",label:"Detail"},on:{click:function(e){t.detailTrans(a.row._id)}}})],1)],1)}},{key:"top-right",fn:function(a){return[e("q-select",{staticClass:"q-mr-md",attrs:{color:"secondary",options:t.optionsStatus,"hide-underline":""},on:{input:t.paidStatusFilter},model:{value:t.filterStatus,callback:function(a){t.filterStatus=a},expression:"filterStatus"}}),e("q-table-columns",{staticClass:"q-mr-sm",attrs:{color:"secondary",columns:t.columns},model:{value:t.visibleColumns,callback:function(a){t.visibleColumns=a},expression:"visibleColumns"}})]}}])})],1)])])])])])},i=[];s._withStripped=!0;var r=e("0c3a"),n=e("c1df"),o={mixins:[Object(r["a"])()],beforeCreate:function(){var t=this;this.$axios.get("account/profile/".concat(this.$store.state.userId)).then(function(a){var e=a.data;t.facilityLimit=e.maximumLoan?e.maximumLoan:0,!e.maximumLoan||e.maximumLoan&&0===e.maximumLoan?e.score<50&&e.otherData&&e.otherData.kkPicture?t.$q.dialog({title:"Upgrade Fasilitas Sedang Diproses",message:"Saat ini Anda belum memiliki fasilitas, silahkan tunggu 1 x 24 jam. \nTerima kasih",color:"primary",ok:"Ya, Lanjutkan",preventClose:!0}).then(function(){t.$router.push({path:"/"})}):t.$q.dialog({title:"Upgrade Fasilitas",message:"Saat ini Anda belum memiliki fasilitas, silahkan lengkapi data profil Anda",color:"primary",ok:"Ya, Lanjutkan",preventClose:!0}).then(function(){t.$router.push({path:"/user/profile"})}):e.score>=50&&e.maximumLoan<3e5&&(!e.personalData||e.personalData&&!e.personalData.ktpPicture&&!e.personalData.selfiePicture)?t.$q.dialog({title:"Upgrade Fasilitas",message:"Lengkapi Profil dan Data Pribadi untuk melanjutkan fasilitas berikutnya.",color:"primary",ok:"Ya, Lanjutkan",cancel:"Batalkan",preventClose:!0}).then(function(){t.$router.push({path:"/user/profile"})}).catch(function(){console.log("Batal")}):e.score>=50&&e.maximumLoan<5e5&&(!e.otherData||e.otherData&&!e.otherData.kkPicture)?t.$q.dialog({title:"Upgrade Fasilitas",message:"Lengkapi Profil dan Data Pribadi untuk melanjutkan fasilitas berikutnya.",color:"primary",ok:"Ya, Lanjutkan",cancel:"Batalkan",preventClose:!0}).then(function(){t.$router.push({path:"/user/profile"})}).catch(function(){console.log("Batal")}):e.score<50&&e.maximumLoan>0&&(!e.otherData||e.otherData&&!e.otherData.kkPicture)&&t.$q.dialog({title:"Ingin menambah fasilitas?",message:"Silahkan lengkapi data Anda untuk dapat memperoleh tambahan fasilitas sesuai Syarat dan Ketentuan yang Berlaku",color:"primary",ok:"Ya, Lanjutkan",cancel:"Batalkan",preventClose:!0}).then(function(){t.$router.push({path:"/user/profile"})}).catch(function(){console.log("Batal")})})},mounted:function(){var t=this;this.$axios.get("/transactions",{params:{$populate:[{path:"voucherLogsId",model:"voucherLogs",populate:[{path:"voucherId",model:"vouchers"}]}],$sort:{createdAt:-1},paidStatus:0,$limit:100,userId:this.$store.state.userId}}).then(function(a){a.data.total>=1?t.$route.params.id?t.$axios.get("/epayment/"+t.$route.params.id).then(function(a){if("1"===a.data.code){var e=a.data.data;t.addTocart(e),t.isSpinner=!1}}):(t.filterStatus=777,t.settingRules(),t.paidStatusFilter()):t.$route.params.id?t.$axios.get("/epayment/".concat(t.$route.params.id)).then(function(a){if("1"===a.data.code){var e=a.data.data;t.addTocart(e),t.isSpinner=!1}}):(t.filterStatus=777,t.settingRules(),t.paidStatusFilter())})},created:function(){this.settingRules(),this.getTransactions(),this.notifyUser(),this.transactionsSummaryUser()},data:function(){return{late_payment:!1,userId:this.$store.state.userId,sumOfTrns:null,totalOfTrns:0,itsPaid:0,itsUnpaid:0,itsCanceled:null,rules:{},facilityLimit:0,totalAmount:0,totalAmountUsed:0,totalFee:0,totalUnique:0,loans:0,loansUniquecode:0,avaibleLoan:0,isSpinner:!0,isSpinnerModal:!1,mytransaction:[],dttransaction:[],filterStatus:777,filterType:777,positionModal:!1,btnMethod:"",cancelData:{},modalData:{},modalDataShow:!1,customModel:"no",modalPosition:"right",message:{trxStatus:"777",messageContent:"",color:"status-success",icon:"swap_vertical_circle",status:"ON PROCESS"},optionType:[{value:777,label:this.$t("all")},{value:1,label:this.$t("smooth")},{value:0,label:this.$t("jammed")}],optionsStatus:[{value:777,label:this.$t("allTrans")},{value:0,label:this.$t("status0")},{value:1,label:this.$t("status1")},{value:2,label:this.$t("status2")},{value:3,label:this.$t("status3")},{value:4,label:this.$t("status4")},{value:5,label:this.$t("status5")},{value:7,label:this.$t("status7")}],visibleColumns:["itemName","createdAt","duedate","total","paidStatusText","paymentStatus","detail"],separator:"horizontal",columns:[{name:"itemName",label:this.$t("itemName"),field:"itemName",align:"left",sortable:!0},{name:"createdAt",label:this.$t("trxDate"),field:"createdAt",align:"left",sortable:!0},{name:"duedate",label:this.$t("dueDate"),field:"duedate",align:"left",sortable:!0},{name:"amountWithFee",label:this.$t("total"),field:"amountWithFee",align:"right",sortable:!0},{name:"discount",label:this.$t("discount"),field:"discount",align:"right",sortable:!0},{name:"total",label:"".concat(this.$t("totalPaid")),field:"total",align:"right",sortable:!0},{name:"paidStatusText",label:this.$t("status"),field:"paidStatusText",align:"left",sortable:!0},{name:"paymentStatus",label:this.$t("paymentStatus"),field:"paymentStatus",align:"left",sortable:!0},{name:"detail",label:this.$t("detail"),field:"detail",align:"center",sortable:!1}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:20}}},methods:{notifyUser:function(){var t=this.$store.state.isBadDebth;t>0&&this.$q.dialog({title:"Maaf",message:"Anda memiliki transaksi yang belum dibayar. Silahkan melakukan pembayaran terlebih dahulu",color:"warning",preventClose:!0})},addTocart:function(t){var a=this;console.log("%caddToCart","font-size: 14px; color: yellow;",t),this.$axios.post("/transactions",{userId:this.$store.state.userId,clientTransId:t.cart.transactionId,gameId:t.cart.gameId,price:t.cart.amount,uniqueCode:t.cart.uniqueCode,amount:t.cart.totalAmount,dueDateAmount:t.cart.dueDateAmount,gracePeriodAmount:t.cart.gracePeriodAmount,paidStatus:"3",purpose:t.cart.paymentPurpose,tempId:this.$route.params.id,clientId:t.cart.clientId,gameUserId:t.cart.clientId,companyId:t.cart.companyId?t.cart.companyId:"lyto",source:"epayment",vendor:"lyto",cart:{itemName:t.cart.itemName,clientId:t.cart.clientId}}).then(function(t){t?a.$axios.get("/transactions",{params:{$populate:[{path:"voucherLogsId",model:"voucherLogs",populate:[{path:"voucherId",model:"vouchers"}]}],$sort:{createdAt:-1},paidStatus:3,$limit:100,userId:a.$store.state.userId}}).then(function(e){console.log("respon do login :",e),e.data.total>=1?a.$router.push("/user/transaction-detail/".concat(t.data._id)):(a.$router.push("/user/dashboard"),a.filterStatus=777,a.settingRules(),a.paidStatusFilter())}):(a.isSpinner=!1,a.$router.push({path:"/user/dashboard"}))}).catch(function(t){a.isSpinner=!1,a.$q.dialog({title:"Notice",message:"Maaf!, Game Id Tidak Terdaftar",color:"negative",ok:!0}).then(function(){a.$router.push({path:"/user/dashboard"}),a.filterStatus=777,a.settingRules(),a.paidStatusFilter()})})},checkDate:function(t){var a=n(t,"YYYY-MM-DD HH:mm"),e=n(),s=e.diff(a,"minutes");return s},detailTrans:function(t){console.log(t),this.$router.push("/user/transaction-detail/".concat(t))},gotoAgree:function(){var t=this.$router.resolve({name:"help",query:{tag:"term"}});window.open(t.href,"_blank")},duedate:function(t,a){var e="";return e=t===this.rules.rules.firtsStage.maxDays?n(a.updatedAt).add(this.rules.rules.secondStage.minDays,"days").format("YYYY-MM-DD HH:mm:ss"):t>=this.rules.rules.secondStage.minDays&&t<=this.rules.rules.secondStage.maxDays?n(a.updatedAt).add(this.rules.rules.thirdStage.minDays,"days").format("YYYY-MM-DD HH:mm:ss"):n(a.updatedAt).add(1,"M").format("YYYY-MM-DD HH:mm:ss"),e},checkPaidStatus:function(t){return"0"===t?"text-negative":"1"===t?"text-positive":"2"===t?"text-positive":"3"===t?"text-primary":"4"===t?"text-negative":"5"===t?"text-negative":"6"===t?"text-negative":"7"===t?"text-warning":"text-waiting"},paidStatusString:function(t){var a="";switch(t){case"0":a=this.$t("status0");break;case"1":a=this.$t("status1");break;case"2":a=this.$t("status2");break;case"3":a=this.$t("status3");break;case"4":a=this.$t("status4");break;case"5":a=this.$t("status5");break;case"6":a=this.$t("status6");break;case"7":a=this.$t("status7");break;default:break}return a},paidStatusFilter:function(){var t=this;console.log("this.filterStatus",this.filterStatus),777===this.filterStatus?this.$axios.get("/transactions",{params:{$populate:[{path:"voucherLogsId",model:"voucherLogs",populate:[{path:"voucherId",model:"vouchers"}]}],$sort:{createdAt:-1},$limit:100,userId:this.$store.state.userId}}).then(function(a){if(a){var e=a.data.data,s=[];e.map(function(a){var e="",i="",r=0,o=0,u=0,l=0,d="",c="",m="",p="",h="",g="";"2"===a.paidStatus?(e=t.rules.rules.secondStage.maxDays,i=n(a.trxSuccessDate).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:n(a.trxSuccessDate).add(t.rules.rules.thirdStage.minDays,"days").format("YYYY-MM-DD HH:mm:ss"),end:n(a.trxSuccessDate).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")}):"0"===a.paidStatus?(e=t.rules.rules.secondStage.maxDays,i=n(a.trxSuccessDate).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:i,end:n(i).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")},console.log("lllll",t.rules.rules.thirdStage.maxDays)):"1"===a.paidStatus?(e=t.rules.rules.secondStage.maxDays,i=n(a.trxSuccessDate).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:i,end:n(i).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")}):(e=t.rules.rules.secondStage.maxDays,i=n(new Date).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:i,end:n(i).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")}),3===a.paidStatus?(d="border-warning",c="text-amber-10",m="Menunggu Proses"):4===a.paidStatus||5===a.paidStatus?(d="border-negative",c="text-red-14",m="Gagal"):a.totalDays<=3?(d="border-primary",c="text-primary",m="Berhasil"):a.totalDays>33?(d="border-negative",c="text-red-14",m="AKUN BLOKIR"):a.totalDays>3&&(d="border-warning",c="text-amber-10",m="TELAT BAYAR"),"0"===a.paidStatus?(p=t.$t("status0"),h="text-negative"):"1"===a.paidStatus?(p=t.$t("status1"),h="text-positive"):"2"===a.paidStatus?(p=t.$t("status2"),h="text-positive"):"3"===a.paidStatus?(p="-",h="text-primary"):"4"===a.paidStatus?(p=t.$t("status4"),h="text-negative"):"5"===a.paidStatus?(p=t.$t("status5"),h="text-negative"):"6"===a.paidStatus?(p=t.$t("status6"),h="text-negative"):"7"===a.paidStatus&&(p=t.$t("status7"),h="text-warning");var f=0;u=t.rules.rules.thirdStage.fine/100*a.price,u<3e3&&(u=3e3),o=t.rules.rules.secondStage.fine/100*a.price,o<2e3&&(o=2e3);var S=0;if("0"===a.paidStatus?S=n(new Date).diff(n(a.trxSuccessDate),"days"):"1"===a.paidStatus&&(S=n(new Date).diff(n(a.trxSuccessDate),"days")),S<=t.rules.rules.firtsStage.maxDays){t.rules.rules.firtsStage.fine,a.price;g="No Fee"}else S>=t.rules.rules.secondStage.minDays&&S<=t.rules.rules.secondStage.maxDays?(l=t.rules.rules.secondStage.fine/100*a.price,l=l<2e3?2e3:l,g=new Date(i)===new Date?"Due Date":""):(l=t.rules.rules.thirdStage.fine/100*a.price,l=l<3e3?3e3:l,g="Grace Period");a.amountWithFee=a.amount+l,a.duedate=i,a.gracePeriod=r,a.fine=f,a.graceFee=u,a.late=e,a.dueDateFee=o,a.borderColor=d,a.paymentStatusColor=c,a.paymentStatus=m,a.paidStatusText=p,a.paidStatusTextColor=h,a.statusOnGoing=g,a.feeOnGoing=l,s.push(a)}),t.mytransaction=s,t.dttransaction=[],t.mytransaction.map(function(a){a.duedate=n(a.duedate).format("DD-MM-YYYY HH:mm:ss"),a.trxSuccessDate=a.trxSuccessDate?n(a.trxSuccessDate).format("DD-MM-YYYY HH:mm:ss"):"",t.dttransaction.push(a)}),console.log("data trans ",t.dttransaction),t.isSpinner=!1}}):this.$axios.get("/transactions",{params:{$populate:[{path:"voucherLogsId",model:"voucherLogs",populate:[{path:"voucherId",model:"vouchers"}]}],$sort:{createdAt:-1},paidStatus:this.filterStatus,$limit:100,userId:this.$store.state.userId}}).then(function(a){if(console.log("paidStatusFilter resp :",a),a){var e=a.data.data,s=[];e.map(function(a){var e="",i="",r=0,o=0,u=0,l=0,d="",c="",m="",p="",h="",g="";"2"===a.paidStatus?(e=t.rules.rules.secondStage.maxDays,i=n(a.trxSuccessDate).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:n(a.trxSuccessDate).add(t.rules.rules.thirdStage.minDays,"days").format("YYYY-MM-DD HH:mm:ss"),end:n(a.trxSuccessDate).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")}):"0"===a.paidStatus?(e=t.rules.rules.secondStage.maxDays,i=n(a.trxSuccessDate).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:i,end:n(i).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")},console.log("lllll",t.rules.rules.thirdStage.maxDays)):"1"===a.paidStatus?(e=t.rules.rules.secondStage.maxDays,i=n(a.trxSuccessDate).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:i,end:n(i).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")}):(e=t.rules.rules.secondStage.maxDays,i=n(new Date).add(e,"days").format("YYYY-MM-DD HH:mm:ss"),r={start:i,end:n(i).add(t.rules.rules.thirdStage.maxDays,"days").format("YYYY-MM-DD HH:mm:ss")}),4===a.paidStatus||5===a.paidStatus?(d="border-negative",c="text-red-14",m="Gagal"):a.totalDays<=3?(d="border-primary",c="text-primary",m="Berhasil"):a.totalDays>33?(d="border-negative",c="text-red-14",m="AKUN BLOKIR"):a.totalDays>3&&(d="border-warning",c="text-amber-10",m="TELAT BAYAR"),"0"===a.paidStatus?(p=t.$t("status0"),h="text-negative"):"1"===a.paidStatus?(p=t.$t("status1"),h="text-positive"):"2"===a.paidStatus?(p=t.$t("status2"),h="text-positive"):"3"===a.paidStatus?(p="-",h="text-primary"):"4"===a.paidStatus?(p=t.$t("status4"),h="text-negative"):"5"===a.paidStatus?(p=t.$t("status5"),h="text-negative"):"6"===a.paidStatus?(p=t.$t("status6"),h="text-negative"):"7"===a.paidStatus&&(p=t.$t("status7"),h="text-warning");var f=0;u=t.rules.rules.thirdStage.fine/100*a.price,u<3e3&&(u=3e3),o=t.rules.rules.secondStage.fine/100*a.price,o<2e3&&(o=2e3);var S=0;if("0"===a.paidStatus?S=n(new Date).diff(n(a.trxSuccessDate),"days"):"1"===a.paidStatus&&(S=n(new Date).diff(n(a.trxSuccessDate),"days")),S<=t.rules.rules.firtsStage.maxDays){t.rules.rules.firtsStage.fine,a.price;g="No Fee"}else S>=t.rules.rules.secondStage.minDays&&S<=t.rules.rules.secondStage.maxDays?(l=t.rules.rules.secondStage.fine/100*a.price,l=l<2e3?2e3:l,g=new Date(i)===new Date?"Due Date":""):(l=t.rules.rules.thirdStage.fine/100*a.price,l=l<3e3?3e3:l,g="Grace Period");a.amountWithFee=a.amount+l,a.duedate=i,a.gracePeriod=r,a.fine=f,a.graceFee=u,a.late=e,a.dueDateFee=o,a.borderColor=d,a.paymentStatusColor=c,a.paymentStatus=m,a.paidStatusText=p,a.paidStatusTextColor=h,a.statusOnGoing=g,a.feeOnGoing=l,s.push(a)}),t.mytransaction=s,t.dttransaction=[],t.mytransaction.map(function(a){t.dttransaction.push(a)}),t.isSpinner=!1}}),this.mytransaction.map(function(a){t.dttransaction.push(a)})},dateFormat:function(t){return t?n(t).format("DD-MM-YYYY HH:mm:ss"):""},transactionsSummaryUser:function(){var t=this;this.$axios.get("/transactions-summary-user/").then(function(a){var e=a.data;t.totalAmount=e.totalAmount,t.totalAmountUsed=e.totalAmountUsed,t.totalFee=e.totalFee,t.totalUnique=e.totalUnique})},getTransactions:function(){var t=this;this.$axios.get("/transactions/?userId="+this.userId).then(function(a){var e=a.data.data;console.log("data = ",e),t.sumOfTrns=e.length,e.map(function(a){"2"===a.paidStatus?t.itsPaid+=a.price:"5"===a.paidStatus&&(t.itsCanceled+=a.amount)}),t.totalOfTrns=t.itsPaid+t.loans,t.isSpinner=!1})},totalLoans:function(){var t=this;this.$axios.get("/transactions/?userId=".concat(this.$store.state.userId,"&paidStatus[$in]=0&paidStatus[$in]=1")).then(function(a){t.transactionsUnpaid=a.data.total,t.loans=0,t.loansUniquecode=0;var e=0,s=0;a.data.data.map(function(t){t.feeDetail.map(function(t){"Handling Fee"===t.feeName?e+=t.fee:"Extra Handling Fee"===t.feeName&&(s+=t.fee)})}),e=Math.round(e),s=Math.round(s),console.log(e),console.log(s)})},total:function(){this.totalOfTrns=this.loans+this.itsPaid},settingRules:function(){var t=this;this.$axios.get("/settings?code=fine").then(function(a){console.log("ddddd",a.data.data),t.rules=a.data.data[0]})},trxModal:function(t,a){var e=this;console.log(this.$q.screen),this.$nextTick(function(){e.positionModal=!0,e.modalDataShow=!0,"1"===a.method?(e.btnMethod="1",e.message={trxStatus:"1",messageContent:"",color:"status-cancel",icon:"error",status:"Konfirmasi Transaksi"},e.cancelData=t,e.modalData=t):(e.btnMethod="0",e.message={trxStatus:"1",messageContent:"Apakah anda yakin ingin membatalkan transaksi ini",color:"status-cancel",icon:"error",status:"Konfirmasi Pembatalan"},e.cancelData=t,e.modalData=t)})},doTrx:function(){var t=this,a=this.modalData;console.log(a),this.isSpinnerModal=!0,this.modalDataShow=!1,this.btnMethod="00";var e={clientTransId:a.transactionId,gameId:a.paymentPurpose,price:a.amount,uniqueCode:a.uniqueCode,amount:a.totalAmount,paidStatus:"",purpose:a.paymentPurpose,trxId:a._id};this.$axios.post("/epayment-trx",e).then(function(e){201===e.status?(t.message={trxStatus:"1",messageContent:"Selamat. Transaksi anda telah berhasil. Berikut detail transaksi anda:",color:"status-success",icon:"check_circle",status:"SUCCESS"},t.isSpinnerModal=!1,t.modalDataShow=!0,t.settingRules(),t.totalLoans(),t.getTransactions(),t.filterStatus=0,t.paidStatusFilter(),t.modalData=a,t.btnMethod="66"):(t.message={trxStatus:"1",messageContent:"Selamat. Transaksi anda telah berhasil. Berikut detail transaksi anda:",color:"status-success",icon:"check_circle",status:"SUCCESS"},t.isSpinnerModal=!1,t.modalDataShow=!0,t.filterStatus=0,t.paidStatusFilter(),t.btnMethod="66")}).catch(function(a){console.log("YYY",a.response);var e=JSON.parse(a.response.data.message);e&&"4"===e.status?(t.message={trxStatus:"4",messageContent:"Mohon maaf. Transaksi anda telah gagal.",color:"status-failed",icon:"error",status:"FAILED"},t.lastTrxId=e.id):"5"===e.status?t.message={trxStatus:"5",messageContent:"Terima kasih. Anda telah membatalkan transaksi ini",color:"status-pending",icon:"error_outline",status:"CANCELED"}:"6"===e.status?t.message={trxStatus:"6",messageContent:"Mohon maaf. Transaksi anda telah gagal. account anda tidak memenuhi persyaratan. Silahkan lakukan pembayaran transaksi anda sebelumnya",color:"status-pending",icon:"warning",status:"FAILED"}:"403"===e.status&&(t.message={trxStatus:"6",messageContent:"Mohon maaf. Anda tidak dapat melakukan transaksi untuk saat ini, untuk dapat melakukan transaksi silahkan melakukan pembayaran atau hubungi customer service kami",color:"status-pending",icon:"warning",status:"FAILED"}),t.isSpinnerModal=!1,t.modalDataShow=!0,t.filterStatus=777,t.paidStatusFilter(),t.btnMethod="66"})},cancelTrx:function(){var t=this;this.isSpinnerModal=!0,this.modalDataShow=!1,this.btnMethod="00";var a={trxId:this.cancelData._id};this.$axios.post("/cancel-trx",a).then(function(a){t.message={trxStatus:"5",messageContent:"Terima kasih. Anda telah membatalkan transaksi ini",color:"status-pending",icon:"error_outline",status:"CANCELED"},t.isSpinnerModal=!1,t.modalDataShow=!0,t.filterStatus=5,t.paidStatusFilter(),t.btnMethod="66"}).catch(function(a){console.log("error",a),t.message={trxStatus:"500",messageContent:"Oopsss. Ada Kesalahan",color:"status-pending",icon:"error_outline",status:"ERROR"},t.isSpinnerModal=!1,t.modalDataShow=!0,t.filterStatus=0,t.paidStatusFilter(),t.btnMethod="66"})},payConfirm:function(t){this.$router.push("/user/transaction-waitingPayment/".concat(t))}},computed:{}},u=o,l=(e("82f1"),e("2877")),d=Object(l["a"])(u,s,i,!1,null,null,null);d.options.__file="Dashboard.page.vue";a["default"]=d.exports},"4b90":function(t,a,e){},"82f1":function(t,a,e){"use strict";var s=e("4b90"),i=e.n(s);i.a}}]);