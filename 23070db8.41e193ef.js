(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["23070db8"],{"0676":function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=n},"11b0":function(t,e,n){var r=n("2a06"),a=n("883d");function o(t){if(a(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return r(t)}t.exports=o},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),a=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}},2236:function(t,e){function n(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}t.exports=n},"2a06":function(t,e,n){t.exports=n("d2d5")},"448a":function(t,e,n){var r=n("2236"),a=n("11b0"),o=n("0676");function i(t){return r(t)||a(t)||o()}t.exports=i},"549b":function(t,e,n){"use strict";var r=n("d864"),a=n("63b6"),o=n("241e"),i=n("b0dc"),s=n("3702"),u=n("b447"),c=n("20fd"),d=n("7cd6");a(a.S+a.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,l,f=o(t),p="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,v=0,b=d(f);if(m&&(g=r(g,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(e=u(f.length),n=new p(e);e>v;v++)c(n,v,m?g(f[v],v):f[v]);else for(l=b.call(f),n=new p;!(a=l.next()).done;v++)c(n,v,m?i(l,g,[a.value,v],!0):a.value);return n.length=v,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},5984:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"products-edit"},[n("q-card",[n("q-card-main",[n("q-btn",{attrs:{flat:""},on:{click:function(e){t.$router.replace(t.baseRoute+"/list")}}},[t._v("Back to List")])],1),n("q-card-main",[n("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.data.text,callback:function(e){t.$set(t.data,"text",e)},expression:"data.text"}}),n("q-input",{attrs:{"stack-label":"Text"},model:{value:t.data.text,callback:function(e){t.$set(t.data,"text",e)},expression:"data.text"}})],1),n("q-card-separator"),n("q-card-actions",{attrs:{align:"end"}},[n("q-btn",{attrs:{color:"primary"},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},a=[];r._withStripped=!0;n("96cf");var o=n("c973"),i=n.n(o),s=n("b93b"),u="admin",c="posts",d="/".concat(u,"/").concat(c),l={mixins:[Object(s["a"])(c)],mounted:function(){console.log(this.$refs.myQuillEditor.quill.getModule("toolbar")),this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imageHandler);var t=this.$route.params.id;t&&this.doGet(t)},data:function(){return{baseRoute:d,editorOption:{}}},methods:{save:function(){var t=this;this.$route.params.id?this.doPatch(this.$route.params.id).then(function(){t.$router.go(-1)}):this.doPost().then(function(){t.$router.go(-1)})},uploadFile:function(t){var e=new FormData;return e.append("file",t),this.$axios.post("post-images",e).then(function(t){return t})},imageHandler:function(){var t=this.$refs.myQuillEditor.quill,e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=i()(regeneratorRuntime.mark(function n(){var r,a,o,i,s;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return r=e.files[0],console.log("User trying to uplaod this:",r),n.next=4,this.uploadFile(r);case 4:a=n.sent,console.log(a),o=a.data.id,i=t.getSelection(),s="".concat(this.$axios.defaults.baseURL,"/uploads/post-images/").concat(o),t.insertEmbed(i.index,"image",s),console.log(this.$refs);case 11:case"end":return n.stop()}},n,this)})).bind(this)}}},f=l,p=(n("7701"),n("2877")),h=Object(p["a"])(f,r,a,!1,null,"37d8db32",null);h.options.__file="Posts.edit.vue";e["default"]=h.exports},7701:function(t,e,n){"use strict";var r=n("b416"),a=n.n(r);a.a},"883d":function(t,e,n){t.exports=n("54a1")},"95d5":function(t,e,n){var r=n("40c3"),a=n("5168")("iterator"),o=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||o.hasOwnProperty(r(e))}},b416:function(t,e,n){},b93b:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f}),n.d(e,"c",function(){return p}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return g});n("f559"),n("cadf"),n("456d"),n("ac6a");var r=n("448a"),a=n.n(r),o=n("9523"),i=n.n(o),s=n("3156"),u=n.n(s),c=function(t,e){return{data:function(){return{uri:t,query:e.query||{},data:[],pagination:{page:1,rowsNumber:0,rowsPerPage:50},filter:"",selected:[],loading:!1}},methods:{filterHandler:function(t){return{}},doFind:function(t){var e=this,n=t||this,r=n.pagination,a=n.filter;this.pagination=r;var o=r.rowsPerPage,s=((r.page>0?r.page:1)-1)*r.rowsPerPage,c=r.page,d=u()({$limit:o,$skip:s},this.query),l={};r.sortBy&&(d.$sort=i()({},r.sortBy,r.descending?-1:1)),l=this.filterHandler(a);var f=u()({},d,l);return this.loading=!0,this.$axios.get(this.uri,{params:f}).then(function(t){var n=t.data;return e.pagination.rowsNumber=n.total,e.pagination.rowsPerPage=o,e.pagination.page=c,e.data=n.data,e.loading=!1,n})}}}},d=function(t,e){return{data:function(){return{toObjectIdMap:[],toISODateMap:[],uri:t,aggregate:e.aggregate||[],data:[],pagination:{page:1,rowsNumber:0,rowsPerPage:50},filter:"",selected:[],loading:!1}},methods:{filterHandler:function(t){return{}},doFind:function(t){var e=this,n=t||this,r=n.pagination,o=n.filter,s=[];s.push.apply(s,a()(this.aggregate));var u=r.rowsPerPage,c=((r.page>0?r.page:1)-1)*r.rowsPerPage,d=r.page;o&&s.push(this.filterHandler(o)),r.sortBy&&s.push({$sort:i()({},r.sortBy,r.descending?-1:1)});var l={total:[{$count:"count"}],data:[{$skip:c}]};r.rowsPerPage&&l.data.push({$limit:u}),s.push({$facet:l}),s.push.apply(s,[{$unwind:"$total"},{$project:{data:1,total:"$total.count"}}]),this.loading=!0;var f=this.uri;console.log(s);var p=this.toObjectIdMap.length?this.toObjectIdMap:[],h=this.toISODateMap.length?this.toISODateMap:[],g={resource:f,aggregate:s,toObjectIdMap:p,toISODateMap:h};return this.$axios.post("aggregate",g).then(function(t){var n=t.data[0];return e.pagination=r,e.pagination.rowsNumber=n&&n.total?n.total:0,e.data=n&&n.data?n.data:[],e.pagination.rowsPerPage=u,e.pagination.page=d,e.loading=!1,n})}}}},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?d(t,e):c(t,e)},f=function(t){return{data:function(){return{uri:t,data:{}}},methods:{doGet:function(t,e){var n=this;return this.$axios.get("".concat(this.uri,"/").concat(t),e).then(function(t){return n.data=t.data,t})},doPost:function(t){var e=this.data;return this.$axios.post(this.uri,e,t).then(function(t){return t})},doPatch:function(t,e){var n=this.data;return this.$axios.patch("".concat(this.uri,"/").concat(t),n,e).then(function(t){return t})}}}},p=function(t){return{data:function(){return{uri:t}},methods:{doRemove:function(t,e){return this.$axios.delete("".concat(this.uri,"/").concat(t),e).then(function(t){return t})}}}},h=function(){return{data:function(){return{errorMessages:{},columnName:{}}},methods:{showError:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.errorMessages={},Object.keys(t).forEach(function(n){n.startsWith("$")||(t[n]["$error"],Object.keys(t[n]).forEach(function(r){if(!r.startsWith("$")&&"boolean"===typeof t[n][r]&&!t[n][r]){var a=u()({field:e.columnName&&e.columnName[n]?e.columnName[n]:n},t[n].$params[r]);e.errorMessages[n]=e.$t("ErrorMessage.".concat(r),a)}}))}),n&&t.$error&&this.$q.notify({message:this.$t("ReviewForm"),color:"red-10",icon:"warning",position:"top-right"})}}}},g=function(t){return"undefined"===typeof t||null===t||""===t||/^[.a-zA-Z -]*$/.test(t)}},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from}}]);